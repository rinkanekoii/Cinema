<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - CinemaHub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-900 text-white min-h-screen">
    <nav class="bg-gray-800 shadow-lg">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-4">
                    <a href="/" class="text-2xl font-bold text-red-500">
                        <i class="fas fa-film"></i> CinemaHub
                    </a>
                    <span class="bg-red-600 text-white px-3 py-1 rounded-full text-sm font-semibold">ADMIN</span>
                </div>
                <div class="hidden md:flex space-x-6">
                    <a href="/" class="hover:text-red-500 transition">Trang chủ</a>
                    <a href="/movies.html" class="hover:text-red-500 transition">Phim</a>
                    <a href="/admin.html" class="text-red-500 font-semibold">Admin Panel</a>
                </div>
                <div class="flex items-center space-x-4">
                    <span id="adminName" class="text-gray-300"></span>
                    <button id="logoutBtn" class="px-4 py-2 bg-red-600 hover:bg-red-700 rounded transition">
                        <i class="fas fa-sign-out-alt"></i> Đăng xuất
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-8"><i class="fas fa-cog"></i> Admin Panel</h1>

        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-gradient-to-r from-blue-600 to-blue-800 rounded-xl p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-blue-200">Tổng phim</p>
                        <p id="totalMovies" class="text-3xl font-bold">0</p>
                    </div>
                    <i class="fas fa-film text-4xl text-blue-300"></i>
                </div>
            </div>
            <div class="bg-gradient-to-r from-green-600 to-green-800 rounded-xl p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-green-200">Suất chiếu</p>
                        <p id="totalShowtimes" class="text-3xl font-bold">0</p>
                    </div>
                    <i class="fas fa-calendar text-4xl text-green-300"></i>
                </div>
            </div>
            <div class="bg-gradient-to-r from-purple-600 to-purple-800 rounded-xl p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-purple-200">Đặt vé hôm nay</p>
                        <p id="todayBookings" class="text-3xl font-bold">0</p>
                    </div>
                    <i class="fas fa-ticket-alt text-4xl text-purple-300"></i>
                </div>
            </div>
            <div class="bg-gradient-to-r from-yellow-600 to-yellow-800 rounded-xl p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-yellow-200">Doanh thu</p>
                        <p id="totalRevenue" class="text-3xl font-bold">0đ</p>
                    </div>
                    <i class="fas fa-money-bill text-4xl text-yellow-300"></i>
                </div>
            </div>
        </div>

        <!-- Tabs -->
        <div class="flex border-b border-gray-700 mb-6">
            <button class="tab-btn active px-6 py-3 text-lg font-semibold border-b-2 border-red-500 text-red-500" data-tab="movies">
                <i class="fas fa-film mr-2"></i>Quản lý Phim
            </button>
            <button class="tab-btn px-6 py-3 text-lg font-semibold text-gray-400 hover:text-white" data-tab="showtimes">
                <i class="fas fa-calendar mr-2"></i>Suất Chiếu
            </button>
            <button class="tab-btn px-6 py-3 text-lg font-semibold text-gray-400 hover:text-white" data-tab="theaters">
                <i class="fas fa-building mr-2"></i>Rạp Chiếu
            </button>
            <button class="tab-btn px-6 py-3 text-lg font-semibold text-gray-400 hover:text-white" data-tab="users">
                <i class="fas fa-users mr-2"></i>Người Dùng
            </button>
        </div>

        <!-- Movies Tab -->
        <div id="movies-tab" class="tab-content">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Danh Sách Phim</h2>
                <button id="addMovieBtn" class="px-6 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition">
                    <i class="fas fa-plus mr-2"></i>Thêm Phim Mới
                </button>
            </div>
            <div class="bg-gray-800 rounded-xl overflow-hidden">
                <table class="w-full">
                    <thead class="bg-gray-700">
                        <tr>
                            <th class="px-4 py-3 text-left">ID</th>
                            <th class="px-4 py-3 text-left">Poster</th>
                            <th class="px-4 py-3 text-left">Tên Phim</th>
                            <th class="px-4 py-3 text-left">Thể Loại</th>
                            <th class="px-4 py-3 text-left">Thời Lượng</th>
                            <th class="px-4 py-3 text-left">Trạng Thái</th>
                            <th class="px-4 py-3 text-center">Thao Tác</th>
                        </tr>
                    </thead>
                    <tbody id="moviesTableBody">
                        <!-- Movies will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Showtimes Tab -->
        <div id="showtimes-tab" class="tab-content hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Quản Lý Suất Chiếu</h2>
                <button id="addShowtimeBtn" class="px-6 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition">
                    <i class="fas fa-plus mr-2"></i>Thêm Suất Chiếu
                </button>
            </div>
            <div class="bg-gray-800 rounded-xl overflow-hidden">
                <table class="w-full">
                    <thead class="bg-gray-700">
                        <tr>
                            <th class="px-4 py-3 text-left">ID</th>
                            <th class="px-4 py-3 text-left">Phim</th>
                            <th class="px-4 py-3 text-left">Rạp</th>
                            <th class="px-4 py-3 text-left">Phòng</th>
                            <th class="px-4 py-3 text-left">Thời Gian</th>
                            <th class="px-4 py-3 text-left">Giá Vé</th>
                            <th class="px-4 py-3 text-center">Thao Tác</th>
                        </tr>
                    </thead>
                    <tbody id="showtimesTableBody">
                        <!-- Showtimes will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Theaters Tab -->
        <div id="theaters-tab" class="tab-content hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Quản Lý Rạp Chiếu</h2>
                <button id="addTheaterBtn" class="px-6 py-2 bg-green-600 hover:bg-green-700 rounded-lg transition">
                    <i class="fas fa-plus mr-2"></i>Thêm Rạp Mới
                </button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="theatersGrid">
                <!-- Theaters will be loaded here -->
            </div>
        </div>

        <!-- Users Tab -->
        <div id="users-tab" class="tab-content hidden">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Quản Lý Người Dùng</h2>
                <div class="flex space-x-4">
                    <input type="text" id="searchUser" placeholder="Tìm kiếm..." 
                           class="px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                </div>
            </div>
            <div class="bg-gray-800 rounded-xl overflow-hidden">
                <table class="w-full">
                    <thead class="bg-gray-700">
                        <tr>
                            <th class="px-4 py-3 text-left">ID</th>
                            <th class="px-4 py-3 text-left">Tên Đăng Nhập</th>
                            <th class="px-4 py-3 text-left">Họ Tên</th>
                            <th class="px-4 py-3 text-left">Email</th>
                            <th class="px-4 py-3 text-left">Vai Trò</th>
                            <th class="px-4 py-3 text-left">Trạng Thái</th>
                            <th class="px-4 py-3 text-center">Thao Tác</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody">
                        <!-- Users will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Add Movie Modal -->
    <div id="movieModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-gray-800 rounded-xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 id="movieModalTitle" class="text-2xl font-bold">Thêm Phim Mới</h3>
                <button id="closeMovieModal" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            <form id="movieForm" class="space-y-4">
                <input type="hidden" id="movieId">
                <div class="grid grid-cols-2 gap-4">
                    <div class="col-span-2">
                        <label class="block text-gray-300 mb-2">Tên Phim *</label>
                        <input type="text" id="tenPhim" required
                               class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                    </div>
                    <div class="col-span-2">
                        <label class="block text-gray-300 mb-2">Mô Tả</label>
                        <textarea id="moTa" rows="3"
                                  class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"></textarea>
                    </div>
                    <div>
                        <label class="block text-gray-300 mb-2">Thể Loại *</label>
                        <input type="text" id="theLoai" required
                               class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                    </div>
                    <div>
                        <label class="block text-gray-300 mb-2">Đạo Diễn</label>
                        <input type="text" id="daoDien"
                               class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                    </div>
                    <div>
                        <label class="block text-gray-300 mb-2">Diễn Viên</label>
                        <input type="text" id="dienVien"
                               class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                    </div>
                    <div>
                        <label class="block text-gray-300 mb-2">Thời Lượng (phút) *</label>
                        <input type="number" id="thoiLuong" required min="1"
                               class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                    </div>
                    <div>
                        <label class="block text-gray-300 mb-2">Ngày Khởi Chiếu *</label>
                        <input type="date" id="ngayKhoiChieu" required
                               class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                    </div>
                    <div>
                        <label class="block text-gray-300 mb-2">Ngày Kết Thúc</label>
                        <input type="date" id="ngayKetThuc"
                               class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                    </div>
                    <div>
                        <label class="block text-gray-300 mb-2">Nước Sản Xuất</label>
                        <input type="text" id="nuocSanXuat"
                               class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                    </div>
                    <div>
                        <label class="block text-gray-300 mb-2">Trạng Thái</label>
                        <select id="trangThai"
                                class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                            <option value="SAP_CHIEU">Sắp chiếu</option>
                            <option value="DANG_CHIEU">Đang chiếu</option>
                            <option value="NGUNG_CHIEU">Ngừng chiếu</option>
                        </select>
                    </div>
                    <div class="col-span-2">
                        <label class="block text-gray-300 mb-2">Poster URL</label>
                        <input type="url" id="posterUrl"
                               class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                    </div>
                    <div class="col-span-2">
                        <label class="block text-gray-300 mb-2">Trailer URL</label>
                        <input type="url" id="trailerUrl"
                               class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                    </div>
                </div>
                <div class="flex justify-end space-x-4 mt-6">
                    <button type="button" id="cancelMovieBtn" class="px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition">
                        Hủy
                    </button>
                    <button type="submit" class="px-6 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition">
                        <i class="fas fa-save mr-2"></i>Lưu
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Showtime Modal -->
    <div id="showtimeModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-gray-800 rounded-xl p-8 max-w-lg w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold">Thêm Suất Chiếu</h3>
                <button id="closeShowtimeModal" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            <form id="showtimeForm" class="space-y-4">
                <div>
                    <label class="block text-gray-300 mb-2">Chọn Phim *</label>
                    <select id="stPhim" required
                            class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                        <option value="">-- Chọn phim --</option>
                    </select>
                </div>
                <div>
                    <label class="block text-gray-300 mb-2">Chọn Rạp *</label>
                    <select id="stRap" required
                            class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                        <option value="">-- Chọn rạp --</option>
                    </select>
                </div>
                <div>
                    <label class="block text-gray-300 mb-2">Chọn Phòng *</label>
                    <select id="stPhong" required
                            class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                        <option value="">-- Chọn phòng --</option>
                    </select>
                </div>
                <div>
                    <label class="block text-gray-300 mb-2">Thời Gian Bắt Đầu *</label>
                    <input type="datetime-local" id="stThoiGian" required
                           class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                </div>
                <div>
                    <label class="block text-gray-300 mb-2">Giá Vé (VNĐ) *</label>
                    <input type="number" id="stGiaVe" required min="0" step="1000" value="90000"
                           class="w-full px-4 py-2 bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500">
                </div>
                <div class="flex justify-end space-x-4 mt-6">
                    <button type="button" id="cancelShowtimeBtn" class="px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition">
                        Hủy
                    </button>
                    <button type="submit" class="px-6 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition">
                        <i class="fas fa-save mr-2"></i>Lưu
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div id="deleteModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-gray-800 rounded-xl p-8 max-w-md w-full mx-4">
            <div class="text-center">
                <i class="fas fa-exclamation-triangle text-6xl text-yellow-500 mb-4"></i>
                <h3 class="text-2xl font-bold mb-2">Xác Nhận Xóa</h3>
                <p id="deleteMessage" class="text-gray-400 mb-6">Bạn có chắc chắn muốn xóa mục này?</p>
                <div class="flex justify-center space-x-4">
                    <button id="cancelDeleteBtn" class="px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition">
                        Hủy
                    </button>
                    <button id="confirmDeleteBtn" class="px-6 py-2 bg-red-600 hover:bg-red-700 rounded-lg transition">
                        <i class="fas fa-trash mr-2"></i>Xóa
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="fixed bottom-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg hidden transform transition-transform">
        <span id="toastMessage">Thao tác thành công!</span>
    </div>

    <script src="/js/auth.js"></script>
    <script src="/js/admin.js"></script>
</body>
</html>
